header
  //- [Pug ë¬¸ë²•] íƒœê·¸= ë¬¸ë²•ì€ #{} ë¬¸ë²•ê³¼ ë‹¬ë¦¬ í•œ html íƒœê·¸ ìë¦¬ì— ì˜¤ì§ ë³€ìˆ˜ ìì‹ ì˜ ê°’ìœ¼ë¡œë§Œ ì±„ìš°ë ¤ëŠ” ê²½ìš°ì— ì‚¬ìš© ê°€ëŠ¥
      //- h1=pageTitle
  
  //- a(href='/')
  //- #10.2 Styles Part Two ê¹ƒí—™ê°•ì˜ì½”ë“œë¶ë¶™í–ˆìœ¼ë‹ˆì¬í™•ì¸ìš”
  a(href="/").header__logo

    //- [ CSS - fontawesome ] i.fab.fa-youtube ì ìš©í•˜ì—¬ ê¸°ì¡´ ì½”ë“œ ë‚´ìš© ëŒ€ì²´
    i.fab.fa-youtube

  nav
    ul      
      //- [ CSS - fontawesome ] i.fab.fa-youtube ì ìš©í•˜ì—¬ ê¸°ì¡´ ì½”ë“œ ë‚´ìš© ëŒ€ì²´
      //- li
      //-   a(href="/") Home
      
      li 
        //- a(href="/search") Search
        //- #10.2 Styles Part Two ê¹ƒí—™ê°•ì˜ì½”ë“œë¶ë¶™í–ˆìœ¼ë‹ˆì¬í™•ì¸ìš”
        a(href="/search") 
          i.fas.fa-search

      //- í˜¼ì í•´ë³¼ ê²ƒë“¤ (ë¦¬íŒ©í† ë§): ë¡œê·¸ì¸ ì•ˆí•œ ìƒíƒœë¼ë©´ nav íƒœê·¸ì—ì„œ Join í•­ëª©, Log in í•­ëª© ë³´ì—¬ì£¼ê³ , ë¡œê·¸ì¸ ìƒíƒœë¼ë©´ Join í•­ëª©ì€ ì—†ì• ê³ , Log out í•­ëª© ë³´ì—¬ì£¼ë„ë¡ ë¦¬íŒ©í† ë§ìš”
      
      //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] if !req.session.loggedIn ì˜¤ë¥˜ë©”ì‹œì§€: Cannot read property 'session' of undefined (ì¦‰, ëˆ„ê°€ ì‚¬ìš©ìì¸ì§€ ì•Œ ìˆ˜ ìˆë”ë¼ë„ ê·¸ ì •ë³´ë¥¼ pug í…œí”Œë¦¿ê³¼ ê³µìœ í•˜ì§€ëŠ” ëª»í•˜ëŠ” ìƒí™©.) 
      //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] Pug í…œí”Œë¦¿ì—ì„œ req.session.loggedIn í˜•íƒœë¡œëŠ” sessionì— ì ‘ê·¼ ë¶ˆê°€. locals í™œìš©í•´ ì ‘ê·¼ ê°€ëŠ¥.
      //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] Pug í…œí”Œë¦¿ì´ ì „ì—­(global) ë³€ìˆ˜ì¸ localsì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, Pugì™€ Expressê°€ ì„œë¡œ localsë¥¼ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ì—¬ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í–ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì•¼ í•¨. 
      //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] locals ì˜¤ë¸Œì íŠ¸ëŠ” ì´ë¯¸ ëª¨ë“  Pug í…œí”Œë¦¿ì— importëœ ì˜¤ë¸Œì íŠ¸ì„. Middlewares.jsì—ì„œ res.locals.loggedIn = Boolean(req.session.loggedIn); ì½”ë“œë¥¼ í†µí•´ session ë¡œê·¸ì¸ ìƒíƒœë¥¼ ë°›ì•„ì„œ localsì— ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì „ë‹¬(ê³µìœ )í•¨
      
      //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] Pug í…œí”Œë¦¿ì—ì„œ req.session.loggedIn í˜•íƒœë¡œëŠ” sessionì— ì ‘ê·¼ ë¶ˆê°€. ë³„ë„ì˜ ì „ìš© ë¬¸ë²• ì—†ì´ locals í™œìš©í•´ ì ‘ê·¼ ê°€ëŠ¥.
      //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] middlewares.jsì˜ localsMiddleware í•¨ìˆ˜ ë‚´ì˜ res.locals.loggedIn = Boolean(req.session.loggedIn); ì½”ë“œ ê°’ì„ base.pugì—ì„œ ë³„ë„ì˜ ì „ìš© ë¬¸ë²• ì—†ì´ loggedIn ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼í•¨
      if loggedIn
        li
          a(href="/videos/upload") Upload Video
        li
          a(href="/users/edit") Edit-Profile
        li
          a(href="/users/logout") Log Out
        li 
          //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] userContoller.js ì˜ postLogin í•¨ìˆ˜ ë‚´ì˜ req.session.userDbResult = userDbResult; ì½”ë“œë¥¼ í†µí•´ session ìœ¼ë¡œ ì „ë‹¬í•˜ê³  middlewares.jsì˜ localsMiddleware í•¨ìˆ˜ ë‚´ì˜ res.locals.loggedInUserDb = req.session.userDbResult || {}; ì½”ë“œ ê°’ì„ base.pugì—ì„œ ë³„ë„ì˜ ì „ìš© ë¬¸ë²• ì—†ì´ loggedInUserDb._id ì´ë¼ëŠ” í•­ëª©ìœ¼ë¡œ ì ‘ê·¼í•¨
          //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] My Profile í˜ì´ì§€ ì—°ê²°ì€ ë¹„ê³µê°œ ìƒí…Œì—ì„œë„ ì „ì²´ê³µê°œ í˜ì´ì§€ì´ë¯€ë¡œ ì•„ë¬´ë‚˜ ì—´ëŒ ê°€ëŠ¥í•¨. 
          //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ë‹¹ì‚¬ìì˜ ì‹ë³„ê°’ì„ userController.js ì˜ postJoin í•¨ìˆ˜ ë‚´ì˜ await User.create({}) ì¿¼ë¦¬ë¬¸ì„ í†µí•´ MongoDB ì— ì˜í•´ ìì²´ ë¶€ì—¬ëœ _id ê°’ìœ¼ë¡œ íŒŒì•…í•¨
          a(href=`/users/${loggedInUserDb._id}`) My Profile            

        li.header__space_btw_welcome_and_avatar Welcome #{loggedInUserDb.name} !

        //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] sessionìœ¼ë¡œë¶€í„° localsì— ì „ë‹¬(ê³µìœ )ëœ ê°’(ì¦‰, ì „ì—­ global ì†ì„±)ì„ ë³„ë„ì˜ ì „ìš© ë¬¸ë²• ì—†ì´ #{loggedInUser.name} í˜•íƒœë¡œ Pugì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•¨
        //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] userController.jsì˜ postLogin í•¨ìˆ˜ ë‚´ì˜ userDbResult ì •ë³´ë¥¼ localsë¡œ ì „ë‹¬(ê³µìœ )í•´ì„œ Pug íŒŒì¼ì—ì„œ ê·¸ ê°’ì„ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤Œ (ì˜ˆ-a(href="") #{loggedInUser.name} ë‹˜ì˜ Profile)
        //- [ Express-session ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ê³„ ë¬¸ë²• ] userContoller.js ì˜ postLogin í•¨ìˆ˜ ë‚´ì˜ req.session.userDbResult = userDbResult; ì½”ë“œë¥¼ í†µí•´ session ìœ¼ë¡œ ì „ë‹¬í•˜ê³  middlewares.jsì˜ localsMiddleware í•¨ìˆ˜ ë‚´ì˜ res.locals.loggedInUserDb = req.session.userDbResult || {}; ì½”ë“œ ê°’ì„ base.pugì—ì„œ ë³„ë„ì˜ ì „ìš© ë¬¸ë²• ì—†ì´ loggedInUserDb.name ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼í•¨            
        //- li               
          //- a(href="/my-profile") #{loggedInUserDb.name} ë‹˜ì˜ Profile

        //- #10.2 Styles Part Two ê¹ƒí—™ê°•ì˜ì½”ë“œë¶ë¶™í–ˆìœ¼ë‹ˆì¬í™•ì¸ìš” (ìˆ˜ê°•ìƒì´ ì½”ë“œ ë³´ì™„)
        //- https://github.com/nomadcoders/wetube-reloaded/commit/37bec52bc3552170d0cd019ae822dc45d10f8776
        //- if loggedInUserDb.socialOnly
        //-   img(src=loggedInUserDb.avatarUrl).header__avatar
        //- else
        //-   img(src="/" + loggedInUserDb.avatarUrl).header__avatar
        
        //- [ Pug ë¬¸ë²• ] #10.3 ë§ì€ ë˜ì§€ë§Œ ì‹¤ìƒ ì¸ì‹ë¶ˆê°€ ì½”ë“œ if loggedInUserDb.avatarUrl === '' ë“±ë¡ëœ avatarUrl ê°’ì´ ì—†ëŠ” ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ê²½ìš° ê¸°ë³¸ ì´ëª¨ì§€ë¥¼ ë³´ì—¬ì¤Œ
        //- [ Pug ë¬¸ë²• ] #10.3 (ìˆ˜ê°•ìƒ ë³´ì™„ ì½”ë“œ) if !loggedInUserDb.avatarUrl
          //- ìì²´ë³´ì™„ì™„ë£Œ --- â˜…â˜…â˜… --- User.js ëª¨ë¸ ë‚´ì˜ socialOnly : false ì¸ ì‚¬ìš©ìëŠ” avatarUrl : í•­ëª©ì— ë‹´ê¸°ëŠ” ê°’ì˜ ì´ ê¸€ììˆ˜ê°€ 48ì(ì˜ˆ- uploads\avatars\89a7577a465d529796065b886a8cd7ff ) ë¡œ ê³ ì •ë˜ì–´ ìˆì–´ì„œ 48ì ì—¬ë¶€(ì‚¬ì´íŠ¸ì§ì ‘ê°€ì…ê³„ì •/GitHubê³„ì •)ì— ë”°ë¼ ì•„ë°”íƒ€ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ëŠ” ì£¼ì†Œê°’ì„ ë‹¤ë¥´ê²Œ ì‹ë³„í•˜ë„ë¡ ì²˜ë¦¬í•¨
          //- ìì²´ë³´ì™„ì™„ë£Œ --- â˜…â˜…â˜… --- ê¸°ë°˜ì½”ë“œ1 middlewares.js ë‚´ì˜ export const avatarUpload = multer({ dest: 'uploads/avatars/', limits: { fileSize: 3000000, }, });
          //- ìì²´ë³´ì™„ì™„ë£Œ --- â˜…â˜…â˜… --- ê¸°ë°˜ì½”ë“œ2 edit-profile.pug ë‚´ì˜ label(for='avatarSection') Avatar ì™€ input(id='avatarSection', name='avatarByMulter', type='file', accept='image/*')
        if !loggedInUserDb.avatarUrl
          span.header__avatar ğŸ˜Š
        else if loggedInUserDb.avatarUrl.length == 48
          img.header__avatar(src='/' + loggedInUserDb.avatarUrl)
        else
          img.header__avatar(src=loggedInUserDb.avatarUrl)

      else
        li 
          //- a(href="/join") Join
          //- #10.2 Styles Part Two ê¹ƒí—™ê°•ì˜ì½”ë“œë¶ë¶™í–ˆìœ¼ë‹ˆì¬í™•ì¸ìš”
          a(href="/join").header__btn  Join

        li 
          a(href="/login") Log in
    